{% extends 'Shopping/base.html' %}
{% block content %}


<style>
  /* The popup form - hidden by default */
.form-popup {
  display: none;
  position: fixed;
  width: 300px;
  left:450px;
  bottom:20px;

}

/* Add styles to the form container */
.form-container {
  max-width: 300px;
  padding: 10px;
  background-color: white;
  border-radius: 15px 50px;
}

/* Full-width input fields */
.form-container input[type=text], .form-container input[type=password] {
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
  border-radius: 15px;
}

/* When the inputs get focus, do something */
.form-container input[type=text]:focus, .form-container input[type=password]:focus {
  background-color: #ddd;
  outline: none;
}

/* Set a style for the submit/login button */
.form-container .btn {
  background-color: #4CAF50;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  width: 100%;
  margin-bottom:10px;
  opacity: 0.8;
  border-radius: 25px;
}

/* Add a red background color to the cancel button */
.form-container .cancel {
  background-color: red;
}

/* Add some hover effects to buttons */
.form-container .btn:hover, .open-button:hover {
  opacity: 1;

}

</style>




<!--<div class="main">-->
{% if User %}
<!-- Example single danger button -->
<div  class="btn-group float-left" style="margin-right:10px;margin-left:5px;">
    <button type="button" class="btn btn-danger dropdown-toggle " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {{se}}
    </button>
    <div class="dropdown-menu">
        <a class="dropdown-item" href="{% url 'logout' %}">logout</a>

    {% if se == 'admin' %}
    <a  onclick="openForm()"  class="dropdown-item" >Add Item</a>
    {% endif %}
    </div>
</div>

{% endif %}
{% if messages %}
{% for i in messages %}

<h5 style="margin-top:50px;text-align:center;background-color:Red;width:100%">{{i}}</h5>

{% endfor %}
{% endif %}
<div style="margin-top:70px">
    <div class="container" style="margin-top:5px;">
    <div class="row">
        {% for i in All_items %}
        <div class="col-md-4">
           <div class="card mb-4 shadow-sm">
                <img src="{{i.Picture.url}}" width="auto" height="200px">
                <div class="card-body">
                    <h5>{{i.title}}</h5>
                    <a href="{% url 'Details' i.title %}">    <p class="card-text">{{i.Description|slice:":20" }}.....</p></a>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-secondary">${{i.Price}}</button>

                            {% if se == 'admin' %}

                            <a href="{% url 'delete_item' i.title %}" class="btn btn-sm btn-outline-secondary">Delete</a>
                            {% endif %}
                        </div>
                        <small class="text-muted">{{i.Time}}</small>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

    <!--Add New Item only Admin-->
    <div class="form-popup" id="myForm">
        <form method="POST" action="{% url 'add_item' %}" style="background-color:Black;color:white;" enctype='multipart/form-data' class="form-container">
            <h1>Add Item</h1>
            {% csrf_token %}
            {{form.title}}
            {{form.Description}}
            {{form.Price}}
            {{form.Image}}
            <button style="margin-top:10px;" type="submit" class="btn">Add</button>
            <button type="button" class="btn cancel" onclick="closeForm()">Cancel</button>
        </form>
    </div>

</div>

<!--</div>-->
<script>
function openForm() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
}
</script>



{% endblock %}
